version: 0.1.0

loader:
  !Loader:Bed
    args:
      filepath: 'peaks.crosslink.slop-200b.bed'

# transforms:
#   - onehot: &onehot
#       !Transform:SomeTransform
#         args:
#           foo: bar
#         spec:
#           shape: []
#           dtype: string

data_structure:
  meta:
    !Connector:IdentityBedName # Formatted name of the sample, i.e. BED row
      args:
        format_string: '{chrom}:{start}-{end}:{strand}:{name}'
      spec:
        shape: []
        dtype: string
  inputs: 
    !Connector:Fasta # RNA/DNA sequence
      args:
        filepath: /home/marc/data/GRCh38/grch38.fasta
      spec:
        shape: [null, 4]
        dtype: int8
      transforms:
        - *onehot
  outputs:
    TaskOne:
      total: 
        !Connector:StrandedBigWig
          args:
            bigwig_plus: bigWig/total/counts.pos.bw
            bigwig_minus: bigWig/total/counts.neg.bw
          spec:
            shape: [null, ]
            dtype: float32
      control: 
        !Connector:StrandedBigWig
          args:
            bigwig_plus: bigWig/control/counts.pos.bw
            bigwig_minus: bigWig/control/counts.neg.bw
          spec:
            shape: [null, ]
            dtype: float32