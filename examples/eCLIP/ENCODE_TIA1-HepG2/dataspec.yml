version: 0.1.0

loader:
  !Loader:Bed
    args:
      filepath: 'peaks.crosslink.slop-200b.bed'

transforms:
  - !Connector:Fasta &ex_trans # RNA/DNA sequence
      args:
        filepath: /home/marc/data/GRCh38/grch38.fasta
      spec:
        shape: [null, 4]
        dtype: int8 
  - !Connector:Fasta &ex_trans2 # RNA/DNA sequence
      args:
        filepath: /home/marc/data/GRCh38/grch38.fasta
      spec:
        shape: [null, 4]
        dtype: int8 

data_structure:
  # meta:
  #   !Connector:IdentityBedName # Formatted name of the sample, i.e. BED row
  #     args:
  #       format_string: '{chrom}:{start}-{end}:{strand}:{name}'
  #     spec:
  #       shape: []
  #       dtype: string
  inputs:
    input:
      !Connector:Fasta # RNA/DNA sequence
        args:
          filepath: /home/marc/data/GRCh38/grch38.fasta
        spec:
          shape: [null, 4]
          dtype: int8
  outputs:
    SomeTask:
      total: 
        !Connector:StrandedBigWig
          args:
            bigwig_plus: bigWig/total/counts.pos.bw
            bigwig_minus: bigWig/total/counts.neg.bw
          spec:
            shape: [null, ]
            dtype: float32
          transforms:
            - *ex_trans
      control: 
        !Connector:StrandedBigWig
          args:
            bigwig_plus: bigWig/control/counts.pos.bw
            bigwig_minus: bigWig/control/counts.neg.bw
          spec:
            shape: [null, ]
            dtype: float32